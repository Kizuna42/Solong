# So_long - 42 School Project

2D ゲームプロジェクト：プレイヤーがマップ上の収集アイテムを全て集めて出口から脱出するゲーム

## 🎮 ゲーム概要

- **目標**: マップ上のすべての収集アイテム（C）を集め、出口（E）から脱出
- **操作**: WASD キーでプレイヤー（P）を移動
- **終了**: ESC キーまたはウィンドウの × ボタン
- **移動カウンター**: 各移動がシェルに表示される

## 🛠️ 技術仕様

- **言語**: C
- **グラフィックライブラリ**: MiniLibX (Linux 版)
- **コンパイル**: 42 Norm 準拠、`-Wall -Wextra -Werror`
- **メモリ管理**: リークなし、適切な解放処理
- **ファイル読み込み**: get_next_line 実装使用

## 📋 要件

### Linux 環境

```bash
# 必要なパッケージをインストール
sudo apt-get update
sudo apt-get install gcc make xorg libxext-dev libbsd-dev
```

## 🚀 コンパイル・実行

```bash
# コンパイル
make

# 実行
./so_long [マップファイル.ber]

# 例
./so_long map/map_correct.ber

# クリーンアップ
make clean    # オブジェクトファイル削除
make fclean   # 実行ファイルも削除
make re       # 再コンパイル
```

## 🗺️ マップ形式

### 有効な文字

- `1`: 壁
- `0`: 空きスペース
- `P`: プレイヤー開始位置（1 つのみ）
- `E`: 出口（1 つのみ）
- `C`: 収集アイテム（1 つ以上）

### マップ要件

- `.ber`拡張子
- 長方形形状
- 壁で完全に囲まれている
- 有効なパスが存在する

## 📁 プロジェクト構造

```
Solong/
├── src/                 # ソースファイル
│   ├── map.c           # マップ読み込み・検証
│   ├── render.c        # 描画処理
│   ├── texture.c       # メイン・キー処理
│   └── ...
├── includes/           # ヘッダファイル
├── libft/             # 42ライブラリ
├── minilibx-linux/    # MiniLibX Linux版
├── textures/          # ゲーム画像
├── map/              # テストマップ
└── Makefile
```

## 🧪 テストマップ

- `map_correct.ber`: 正常なマップ
- `map_multiplayer.ber`: エラーテスト（複数プレイヤー）
- `map_not_closed.ber`: エラーテスト（壁未完成）
- `map_no_collect.ber`: エラーテスト（収集アイテムなし）

## ✅ 実装機能

### 必須機能

- [x] マップ読み込み・検証
- [x] グラフィック表示
- [x] キー入力処理
- [x] 移動制限（壁判定）
- [x] 収集アイテム取得
- [x] ゲームクリア判定
- [x] 移動カウンター
- [x] 適切な終了処理

### セキュリティ

- [x] メモリリーク防止
- [x] セグメンテーションフォルト対策
- [x] 不正ファイルアクセス防止
- [x] バッファオーバーフロー対策

## 🏆 42 評価基準

- **Norm**: 42 コーディング規約準拠
- **エラーハンドリング**: 包括的なエラー処理
- **メモリ管理**: リークなし
- **機能性**: 全要件実装
- **効率性**: get_next_line 使用による高速化

## 📝 開発ノート

### 最適化実装

- **get_next_line**: 1024 バイトバッファによる高速ファイル読み込み
- **効率的描画**: 必要部分のみ再描画
- **メモリ管理**: static 変数による適切な管理

### Linux 専用設定

- X11 ライブラリ使用
- Linux 環境のキーコード対応
- 条件付きコンパイル削除済み

---

**作成者**: 42 Student
**プロジェクト**: So_long
**環境**: Linux (Ubuntu/Debian 推奨)
